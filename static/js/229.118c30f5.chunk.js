"use strict";(self.webpackChunktest_ui=self.webpackChunktest_ui||[]).push([[229],{53229:function(e,t,r){r.r(t),r.d(t,{AlchemyProvider:function(){return m}});var n=r(78283),i=r(70886),o=r(24269),s=r(38114),c=r(47061),u=r(59900),a=r(88047),h=r.n(a),d=r(81015),f=r(3576),l=r(37482),v=r(79545),p=(r(54432),function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;(0,c.Z)(this,e),this.sendBatchFn=t,this.maxBatchSize=r,this.pendingBatch=[]}return(0,u.Z)(e,[{key:"enqueueRequest",value:function(e){return(0,d._)(this,void 0,void 0,h().mark((function t(){var r,n,i=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={request:e,resolve:void 0,reject:void 0},n=new Promise((function(e,t){r.resolve=e,r.reject=t})),this.pendingBatch.push(r),this.pendingBatch.length===this.maxBatchSize?this.sendBatchRequest():this.pendingBatchTimer||(this.pendingBatchTimer=setTimeout((function(){return i.sendBatchRequest()}),10)),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"sendBatchRequest",value:function(){return(0,d._)(this,void 0,void 0,h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pendingBatch,this.pendingBatch=[],this.pendingBatchTimer&&(clearTimeout(this.pendingBatchTimer),this.pendingBatchTimer=void 0),r=t.map((function(e){return e.request})),e.abrupt("return",this.sendBatchFn(r).then((function(e){t.forEach((function(t,r){var n=e[r];if(n.error){var i=new Error(n.error.message);i.code=n.error.code,i.data=n.error.data,t.reject(i)}else t.resolve(n.result)}))}),(function(e){t.forEach((function(t){t.reject(e)}))})));case 5:case"end":return e.stop()}}),e,this)})))}}]),e}()),m=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;(0,c.Z)(this,r);var i=r.getApiKey(e.apiKey),o=r.getAlchemyNetwork(e.network),s=r.getAlchemyConnectionInfo(o,i,"http");void 0!==e.url&&(s.url=e.url),s.throttleLimit=e.maxRetries;var u=d.E[o];(n=t.call(this,s,u)).apiKey=e.apiKey,n.maxRetries=e.maxRetries,n.batchRequests=e.batchRequests;var a=Object.assign(Object.assign({},n.connection),{headers:Object.assign(Object.assign({},n.connection.headers),{"Alchemy-Ethers-Sdk-Method":"batchSend"})});return n.batcher=new p((function(e){return(0,v.fetchJson)(a,JSON.stringify(e))})),n}return(0,u.Z)(r,[{key:"detectNetwork",value:function(){var e=this,t=Object.create(null,{detectNetwork:{get:function(){return(0,n.Z)((0,i.Z)(r.prototype),"detectNetwork",e)}}});return(0,d._)(this,void 0,void 0,h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this.network)){e.next=7;break}return e.next=4,t.detectNetwork.call(this);case 4:if(r=e.sent){e.next=7;break}throw new Error("No network detected");case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_startPending",value:function(){(0,d.l)("WARNING: Alchemy Provider does not support pending filters")}},{key:"isCommunityResource",value:function(){return this.apiKey===d.D}},{key:"send",value:function(e,t){return this._send(e,t,"send")}},{key:"_send",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"},s=Object.assign({},this.connection);if(s.headers["Alchemy-Ethers-Sdk-Method"]=r,this.batchRequests||i)return this.batcher.enqueueRequest(o);this.emit("debug",{action:"request",request:(0,d.d)(o),provider:this});var c=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(c&&this._cache[e])return this._cache[e];var u=(0,v.fetchJson)(this.connection,JSON.stringify(o),g).then((function(e){return n.emit("debug",{action:"response",request:o,response:e,provider:n}),e}),(function(e){throw n.emit("debug",{action:"response",error:e,request:o,provider:n}),e}));return c&&(this._cache[e]=u,setTimeout((function(){n._cache[e]=null}),0)),u}}],[{key:"getApiKey",value:function(e){if(null==e)return d.D;if(e&&"string"!==typeof e)throw new Error("Invalid apiKey '".concat(e,"' provided. apiKey must be a string."));return e}},{key:"getNetwork",value:function(e){return"string"===typeof e&&e in d.C?d.C[e]:(0,f.H)(e)}},{key:"getAlchemyNetwork",value:function(e){if(void 0===e)return d.a;if("number"===typeof e)throw new Error("Invalid network '".concat(e,"' provided. Network must be a string."));if(!Object.values(d.N).includes(e))throw new Error("Invalid network '".concat(e,"' provided. Network must be one of: ")+"".concat(Object.values(d.N).join(", "),"."));return e}},{key:"getAlchemyConnectionInfo",value:function(e,t,r){var n="http"===r?(0,d.g)(e,t):(0,d.b)(e,t);return{headers:d.I?{"Alchemy-Ethers-Sdk-Version":d.V}:{"Alchemy-Ethers-Sdk-Version":d.V,"Accept-Encoding":"gzip"},allowGzip:!0,url:n}}}]),r}(l.r);function g(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}}}]);
//# sourceMappingURL=229.118c30f5.chunk.js.map